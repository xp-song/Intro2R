<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Intro2R</title>
    <meta charset="utf-8" />
    <meta name="author" content="xpsong" />
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/metropolis.css" rel="stylesheet" />
    <link rel="stylesheet" href="theme-tweaks.css" type="text/css" />
    <link rel="stylesheet" href="custom-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide, title-slide

# Intro2R
## R Environment and Syntax
### xpsong
### <a href="https://github.com/xp-song/Intro2R" class="uri">https://github.com/xp-song/Intro2R</a>
### updated 2019-08-14

---






class: inverse, center, middle

# Before we begin...

1. Navigate to course webpage and read background information  
*https://github.com/xp-song/Intro2R*  

2. Ensure that you have installed __R__ on your computer, followed by __R Studio__  
*(follow links under '_Instructions_' section of webpage)*

3. [Download](https://github.com/xp-song/Intro2R/archive/master.zip) workshop materials  
*(green button on webpage)*

---

class: inverse, center, middle
name: about

# Outline  

__[About](#about)__  
 
[Getting Started](#Getstarted)  

[General Syntax](#gensyntax)    

[Data Structures](#structures)  

[Functions](#functions)  

[Useful Resources](#resources)  

---

background-image: url(https://www.r-project.org/logo/Rlogo.svg)
background-size: 100px
background-position: 95% 15%
class: left

# What is R?

- Programming language and software environment with a command line interface

- RStudio is often used as a software client

???

- Cmd line interface is text-based
  
  - Different from Excel/SPSS, where users interact with the software using a GUI

- Rstudio: E.g. Microsoft Word provides &gt; basic text editor (Notepad)

  - In this course, we will work entirely within RStudio  

--

- Both R and RStudio are open source software

- Huge library of packages created by the R community

???

- Open source:

  - Anyone can contribute to its development

  - Easy to look for help online (Q&amp;A sites, forums)
  
- Packages: Like apps/toolboxes, each has diff functions
  - E.g. run statistical analysis, build websites, make slides &amp; reports (these course materials)

---
class: left

# About this crash course

## What it IS
- Designed for those with minimal coding experience
- Give you a taste of what R can do

???
- ... hopefully give you some ideas on how you can use R for your own projects
  - Slide deck 1: Look at the structure/syntax of the language (English - nouns, verbs.. R - different objects) 
  - Slide deck 2: Dive right into analysing data

--

## What it is NOT
- A substitute to practicing the fundamentals of the language
- A lesson in statistics

???
- I have provided links to more resources in your notes.. check them out if you're interested

---

class: inverse, center, middle
name: Getstarted

# Outline  

[About](#about)  
 
__[Getting Started](#Getstarted)__  

[General Syntax](#gensyntax)    

[Data Structures](#structures)  

[Functions](#functions)  

[Useful Resources](#resources)  

---

class: inverse, center

# Course materials

&lt;br&gt;

&lt;br&gt;

**_Intro2R_**  
  
_/notes_ &lt;sup&gt;1&lt;/sup&gt;  
_/slides_ &lt;sup&gt;1&lt;/sup&gt;  
_/data_  
_/output_  
_/Intro2R.Rproj_  

.footnote[[1] View course materials in your web browser by opening the '_.html_' files
]

???

- During the workshop, you'll probably need to refer to the notes...can leave them open
- Output: when we generate figures/graphs, we will specify in our code to export them here.
- Let's open the RStudio Project file. This boots up RStudio (demo)

---

class: left

# R Studio Client

&lt;img src="images/rstudioclient.png" width="600" style="display: block; margin: auto;" /&gt;

- __Console:__ Command line input/output  
- __Script editor:__ View/edit files that contain code
- __Environment/History__  
- __Files/Plots/Packages/Help/Viewer__

???

- Console: shows real-time interaction (inputs AND OUTPUTS)
  - All you would see if you ran R without RStudio!
  - E.g. Try doing some calculations

- Create new .R script (File &gt; New File &gt; R script) &gt; Script editor
  - Write some calculations &gt; Cmd+Enter
  - Code sent to the console!
  - Comment on your code (R skips over anything after '#')
  - Scripts let us edit/save/share our code with others!  

---

class: left

# R Notebooks

## What are R Notebooks?

- R Notebooks (a.k.a. [R Markdown Notebooks](http://rmarkdown.rstudio.com)) are files ending with '_.Rmd_'.  

- Compared to basic '_.R_' scripts, they allows us to:  
  - Write normal text alongside code
  - Interact with code within a single document
  - Generate (i.e. '_knit_') different types of files 

???
- R Notebooks = R Markdown files  

- E.g. All materials in this course were created from _.Rmd_ files.

--

&lt;br&gt;

**Try creating a new R Notebook `File &gt; New File &gt; R Notebook`**

---

class: left

# R Notebooks

&lt;img src="images/notebook.png" width="700" style="display: block; margin: auto;" /&gt;
- __Header section:__ specify document [parameters](https://bookdown.org/yihui/rmarkdown/html-document.html)  
- __Normal text__  
- __Code chunk:__ write code and specify code [parameters](https://bookdown.org/yihui/rmarkdown/r-code.html)   

???
- YAML Ain't Markup Language (readable language commonly used for config files)  
- Follow instructions  

- Code chunk: Results appear beneath the chunk
  - Plot(): our very first function (tool in toolbox)
  - Name of function always followed by brackets
  - Look up a function with `?`
  - Can name the chunk

--

**Save our new file as _'myanalysis.Rmd'_**  

???

- We will use this R Notebook for the rest of the lecture

---

class: left

# RStudio Projects

**Try creating a new RStudio Project `File &gt; New Project &gt; New Directory &gt; New Project`**

&lt;img src="images/new project.png" width="300" style="display: block; margin: auto;" /&gt;

---

class: left

# RStudio Projects

## What are RStudio Projects?

- RStudio Projects help organise your work into separate 'R sessions'.

- Each project is it's own workspace (separate configuration, history, etc.)

--

- The location of the '_.RProj_' file defines the 'working directory'

  - **Type `getwd()` in the _console_ of our new project**
  
  - This returns the absolute path to our working directory  
  e.g. `/Users/&lt;computer_username&gt;/Desktop/test`
  
???

- Try typing `getwd()` in the Intro2R project

- Delete test project

---

class: left

# RStudio Projects

## 🌟 Best Practice

- Keep all project items in the working directory 

- Use _relative_ paths in your script

  - **Try reading in data in your R Notebook**  
  `read.csv("&lt;path to Intro2R folder&gt;/Intro2R/data/ozone_data.csv")`
  `read.csv("data/ozone_data.csv")`
  
???

- Relative paths allow scripts to work across different computers

- RStudo Project -&gt; 'homing beacon'... don't need to write out initial path

---

class: inverse, center, middle
name: gensyntax

# Outline  

[About](#about)  
 
[Getting Started](#Getstarted)  

__[General Syntax](#gensyntax)__  

[Data Structures](#structures)  

[Functions](#functions)  

[Useful Resources](#resources)  

---

class: left

# General Syntax

.left-column[ 
### Operators
]
.right-column[ 
__Arithmetic__  
  
**Solve the following:**  
$$
\frac{ (1+2) * (4-5)}{50}
$$
] 

???

- Refer to your notes for the list of operators

- We will only go through some operators now

--
.right-column[ 

```r
(1+2)*(4-5)/50
```

```
## [1] -0.06
```
]

---

class: left

# General Syntax

.left-column[ 
### Operators
]
.right-column[ 
__Logical__  
  
**Check if `1e3` is larger or equal to `1*10^3`**  
**What is the output?**  
] 

--
.right-column[ 

```r
1e3 &gt;= 1*10^3
```

```
## [1] TRUE
```
]

---

class: left

# General Syntax

.left-column[ 
### &lt;span style="color:grey"&gt;Operators&lt;/span&gt;
### Variables
]
.right-column[ 
Variables are named object used to store data
- `&lt;-` is used to assign variable names in R (e.g. `x &lt;- 4`)
- Print variables by name (`x` vs. `"x"`)
- Assigning data to an existing variable overwrites it (`x &lt;- 10`)
]

???
- Arrow shortcut `Option/Alt`+`-`
- `=` produces a similar result, but we reserve it for other uses (in functions)
- New variable in environment

- Case sensitive!
- "hello" vs. hello (text in quotation)

--
.right-column[ 
**🌟Best Practice**  
- Clear and consistent names
- Avoid numbers/symbols/whitespace
]

---

class: left

# General Syntax

.left-column[ 
### &lt;span style="color:grey"&gt;Operators&lt;/span&gt;
### Variables
]
.right-column[ 
__Data types and examples:__
- Numeric (`3.142`), Integer (`5L`)
- Character (`"hello"`)
- Logical (`TRUE, FALSE`)
- Complex
] 

--

.right-column[ 
**Let's assign new variables `name`, `age`, and `weight`**
]

???
- Print out 

--

.right-column[ 
**Check the data type for each variable using the function `is.numeric()`, `is.integer()`, `is.character()`**
]

???

- try `is.integer()` for age (compare when add `L`)
---

class: inverse, center, middle
name: structures

# Outline  

[About](#about)  
 
[Getting Started](#Getstarted)  

[General Syntax](#gensyntax)  

__[Data Structures](#structures)__  

[Functions](#functions)  

[Useful Resources](#resources)  

---

class: left

# Data Structures

.left-column[ 
### Vectors
]
.right-column[
- Linear collection of data 
- Must be of the _same_ data type
]
--
.right-column[
**Assign a _vector_ of names to the variable `name`**  
(use the concatenate function `c()`)

```r
name &lt;- c("Me", "Tom", "Dick", "Harry", "Susan") # character vector
```
]

???
- What if we add a number? Treated as "character" (see environment)! COERCION

--
.right-column[
**Assign a _vector_ of numbers to the variable `age`**

```r
age &lt;- c(20, 25, 30, 35, 40) # numeric vector
```
]
???
- What if we add characters/text? COERCE
- What if we add LOGICAL data? (1 = TRUE, 0 = FALSE)

---

class: left

# Data Structures

.left-column[ 
### Vectors
]
.right-column[
- Linear collection of data 
- Must be of the _same_ data type
- _Operations in R are vectorised_
]
--
.right-column[
**Subtract 5 from the vector `age`**

```r
age-5
```

```
## [1] 15 20 25 30 35
```
]
--
.right-column[
**Add together two vectors**

```r
age+age
```

```
## [1] 40 50 60 70 80
```
]

---

class: left

# Data Structures

.left-column[ 
### &lt;span style="color:grey"&gt;Vectors&lt;/span&gt;
### Lists
]
.right-column[
- Linear collection of data 
- Can contain of different _types_ and _structure_ of data
]
--
.right-column[
**Create a list with a mix of data types and variables**

```r
myteam &lt;- list(name, age, "Group 1", 2019)
```
]

---

class: left

# Data Structures

.left-column[ 
### &lt;span style="color:grey"&gt;Vectors&lt;/span&gt;
### Lists
]
.right-column[
- Linear collection of data 
- Can contain of different _types_ and _structure_ of data
]
.right-column[

```r
myteam
```

```
## [[1]]
## [1] "Me"    "Tom"   "Dick"  "Harry" "Susan"
## 
## [[2]]
## [1] 20 25 30 35 40
## 
## [[3]]
## [1] "Group 1"
## 
## [[4]]
## [1] 2019
```
]
???
- Elements in a list are indexed with [[]]
- Sub-indices are in [] (nested like tree branches)
- Lists are very flexible!

---

class: left

# Data Structures

.left-column[ 
### &lt;span style="color:grey"&gt;Vectors&lt;/span&gt;
### &lt;span style="color:grey"&gt;Lists&lt;/span&gt;
### Factors
]
.right-column[
- A special kind of vector that represents categorical data with discrete levels
]
???
- Includes ordinal/binary
--
.right-column[
**Let's code the sex of each person in `name` variable**  
(use the functions `factor()` and `c()`)

```r
sex &lt;- factor(c("M","M","M","M","F")) 
```
]
--
.right-column[

```r
sex
```

```
## [1] M M M M F
## Levels: F M
```
]
???
- Levels are shown (binary)

---

class: left

# Data Structures

.left-column[ 
### &lt;span style="color:grey"&gt;Vectors&lt;/span&gt;
### &lt;span style="color:grey"&gt;Lists&lt;/span&gt;
### Factors
]
.right-column[
- A special kind of vector that represents categorical data with discrete levels
]
--
.right-column[
**Let's code the performance of each person in `name`**  

```r
perform &lt;- factor(c("High", "Low", "Med", "Med", "High"))
```
]
--
.right-column[

```r
perform
```

```
## [1] High Low  Med  Med  High
## Levels: High Low Med
```
What is wrong with this output?
]

---

class: left

# Data Structures

.left-column[ 
### &lt;span style="color:grey"&gt;Vectors&lt;/span&gt;
### &lt;span style="color:grey"&gt;Lists&lt;/span&gt;
### Factors
]
.right-column[
**Define the order using the `levels=` argument in `factor()`**

```r
perform &lt;- factor(c("High", "Low", "Med", "Med", "High"), 
                  levels = c("Low", "Med", "High"))
perform
```

```
## [1] High Low  Med  Med  High
## Levels: Low Med High
```
]
???
- Order of levels are alphabetical unless specified
---

class: left

# Data Structures

.left-column[ 
### &lt;span style="color:grey"&gt;Vectors&lt;/span&gt;
### &lt;span style="color:grey"&gt;Lists&lt;/span&gt;
### &lt;span style="color:grey"&gt;Factors&lt;/span&gt;
### Matrices
]
.right-column[
- Tabular data (rows &amp; columns)
- Must be of the _same_ data type
]
???
- 2D/rectangular data
- E.g. Image processing (each pixel has a value), spatial data..
--
.right-column[
**Create a 4 by 3 matrix of sequential numbers**  
Use `matrix()` and the `:` operator to create a sequence

```r
m &lt;- matrix(1:12, nrow = 4)
```
]
--
.right-column[

```r
m
```

```
##      [,1] [,2] [,3]
## [1,]    1    5    9
## [2,]    2    6   10
## [3,]    3    7   11
## [4,]    4    8   12
```
]

---

class: left

# Data Structures

.left-column[ 
### &lt;span style="color:grey"&gt;Vectors&lt;/span&gt;
### &lt;span style="color:grey"&gt;Lists&lt;/span&gt;
### &lt;span style="color:grey"&gt;Factors&lt;/span&gt;
### &lt;span style="color:grey"&gt;Matrices&lt;/span&gt;
### Dataframes
]
.right-column[
- Tabular data (rows &amp; columns)
- Rows represent data entries, columns represent different variables
]
--
.right-column[
**Import the dataset `ozone_data.csv` into your R Notebook using `read.csv()`**


```r
ozone &lt;- read.csv("/data/ozone_data.csv") # column headers in first row
```
]

---

class: left

# Data Structures

.left-column[ 
### &lt;span style="color:grey"&gt;Vectors&lt;/span&gt;
### &lt;span style="color:grey"&gt;Lists&lt;/span&gt;
### &lt;span style="color:grey"&gt;Factors&lt;/span&gt;
### &lt;span style="color:grey"&gt;Matrices&lt;/span&gt;
### Dataframes
]
.right-column[
**View the first few rows of `ozone`**  

```r
head(ozone) #print first few rows
```

```
##   rad temp wind ozone
## 1 190   67  7.4    41
## 2 118   72  8.0    36
## 3 149   74 12.6    12
## 4 313   62 11.5    18
## 5 299   65  8.6    23
## 6  99   59 13.8    19
```
]
--
.right-column[
**Check the dimensions of `ozone`**  

```r
dim(ozone)
```

```
## [1] 111   4
```
]

???

- Tabular data in R: rows, cols

---

class: left

# Data Structures

.left-column[ 
### &lt;span style="color:grey"&gt;Vectors&lt;/span&gt;
### &lt;span style="color:grey"&gt;Lists&lt;/span&gt;
### &lt;span style="color:grey"&gt;Factors&lt;/span&gt;
### &lt;span style="color:grey"&gt;Matrices&lt;/span&gt;
### Dataframes
]
.right-column[
**Check the names of `ozone` using `dimnames()`, `rownames()` and `colnames()`**  

```r
dimnames(ozone)
```

```
## [[1]]
##   [1] "1"   "2"   "3"   "4"   "5"   "6"   "7"   "8"   "9"   "10"  "11" 
##  [12] "12"  "13"  "14"  "15"  "16"  "17"  "18"  "19"  "20"  "21"  "22" 
##  [23] "23"  "24"  "25"  "26"  "27"  "28"  "29"  "30"  "31"  "32"  "33" 
##  [34] "34"  "35"  "36"  "37"  "38"  "39"  "40"  "41"  "42"  "43"  "44" 
##  [45] "45"  "46"  "47"  "48"  "49"  "50"  "51"  "52"  "53"  "54"  "55" 
##  [56] "56"  "57"  "58"  "59"  "60"  "61"  "62"  "63"  "64"  "65"  "66" 
##  [67] "67"  "68"  "69"  "70"  "71"  "72"  "73"  "74"  "75"  "76"  "77" 
##  [78] "78"  "79"  "80"  "81"  "82"  "83"  "84"  "85"  "86"  "87"  "88" 
##  [89] "89"  "90"  "91"  "92"  "93"  "94"  "95"  "96"  "97"  "98"  "99" 
## [100] "100" "101" "102" "103" "104" "105" "106" "107" "108" "109" "110"
## [111] "111"
## 
## [[2]]
## [1] "rad"   "temp"  "wind"  "ozone"
```
]
???
- Try using `rownames()` and `colnames()`

---

class: left

# Data Structures

.left-column[ 
### &lt;span style="color:grey"&gt;Vectors&lt;/span&gt;
### &lt;span style="color:grey"&gt;Lists&lt;/span&gt;
### &lt;span style="color:grey"&gt;Factors&lt;/span&gt;
### &lt;span style="color:grey"&gt;Matrices&lt;/span&gt;
### Dataframes
]
.right-column[
**Extract data by colnames using `$`**  
(output is a vector)

```r
ozone$temp
```

```
##   [1] 67 72 74 62 65 59 61 69 66 68 58 64 66 57 68 62 59 73 61 61 67 81 79
##  [24] 76 82 90 87 82 77 72 65 73 76 84 85 81 83 83 88 92 92 89 73 81 80 81
##  [47] 82 84 87 85 74 86 85 82 86 88 86 83 81 81 81 82 89 90 90 86 82 80 77
##  [70] 79 76 78 78 77 72 79 81 86 97 94 96 94 91 92 93 93 87 84 80 78 75 73
##  [93] 81 76 77 71 71 78 67 76 68 82 64 71 81 69 63 70 75 76 68
```
]

---

class: left

# Data Structures

.left-column[ 
### &lt;span style="color:grey"&gt;Vectors&lt;/span&gt;
### &lt;span style="color:grey"&gt;Lists&lt;/span&gt;
### &lt;span style="color:grey"&gt;Factors&lt;/span&gt;
### &lt;span style="color:grey"&gt;Matrices&lt;/span&gt;
### Dataframes
]
.right-column[
**Create a dataframe with the vectors `name`,`sex`, `age` and `perform`**

```r
team_details &lt;- data.frame(name, age, sex, perform)
```
]
--
.right-column[

```r
team_details
```

```
##    name age sex perform
## 1    Me  20   M    High
## 2   Tom  25   M     Low
## 3  Dick  30   M     Med
## 4 Harry  35   M     Med
## 5 Susan  40   F    High
```
]

---

class: left

# Back to operators...

## Subsetting in R  

**What is 5th element in the vector `name`?**

```r
name[5]
```

```
## [1] "Susan"
```
--
**What is the 5th element of the column `name` in the dataframe `team_details`?**  
(hint: use `$` to extract columns as vectors)
--

```r
team_details$name[5]
```

```
## [1] Susan
## Levels: Dick Harry Me Susan Tom
```

---

class: left

# Back to operators...

## Subsetting in R  

**Extract the element in the 2nd row and 4th col in `team_details`** 

```r
team_details[2,4]
```

```
## [1] Low
## Levels: Low Med High
```
--
**Extract 2nd row and all cols in `team_details`** 

```r
team_details[2,]
```

```
##   name age sex perform
## 2  Tom  25   M     Low
```
--
**Extract the 4th col and all rows except the 2nd in `team_details`** 

```r
team_details[-2,4]
```

```
## [1] High Med  Med  High
## Levels: Low Med High
```
---

class: left

# Back to operators...

## Subsetting in R  
**Extract rows 1 to 3 in `team_details`**  
--

```r
team_details[1:3,]
```

```
##   name age sex perform
## 1   Me  20   M    High
## 2  Tom  25   M     Low
## 3 Dick  30   M     Med
```
--
**Extract rows 1 and 3 in `team_details`**  
--

```r
team_details[c(1,3),]
```

```
##   name age sex perform
## 1   Me  20   M    High
## 3 Dick  30   M     Med
```

---

class: left

# Back to operators...

## Subsetting in R: Quick test!⚡️  
Extract R's built-in dataset `data(mtcars)`  

--

**Extract data on cars with a fuel efficiency of at least 20 mpg, and that are more than 108 hp**  


```
##                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4      21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag  21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
## Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
## Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
## Volvo 142E     21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2
```

--

- **Hint:** `mtcars[  &amp; , ]`

--

- **Answer:** `mtcars[mtcars$mpg &gt;= 20 &amp; mtcars$hp &gt; 108, ]`

???
- Refer to 'Operators' in notes

---

class: inverse, center, middle
name: functions

# Outline  

[About](#about)  
 
[Getting Started](#Getstarted)  

[General Syntax](#gensyntax)  

[Data Structures](#structures)  

__[Functions](#functions)__  

[Useful Resources](#resources) 

---

class: left

# Functions

.left-column[ 
### Overview
]
.right-column[
Functions have inputs and outputs (look up details with `?`)  
]

???

- Tools in toolbox (functions in packages)
- Inputs/outputs: Orange squeezer, juicer, blender
  - input (data/arguments) = orange
  - output = orange juice, smoothie
  
--
.right-column[
**E.g. Plot the performance distribution in `team_details`**

```r
plot(team_details$perform)
```

![](1_R_environment_and_syntax_slides_files/figure-html/unnamed-chunk-35-1.png)&lt;!-- --&gt;
]
???
- plotting functions

---

class: left

# Functions

.left-column[ 
### Overview
]
.right-column[
Functions have inputs and outputs (look up details with `?`)  
]
.right-column[
**E.g. Find the mean age in `team_details`**

```r
mean(team_details$age)
```

```
## [1] 30
```
]

???
- Statistical functions
- Some basic functions are in your notes (u can refer to them)
--
.right-column[
**E.g. Find the number of people (rows) in `team_details`**
]
--
.right-column[

```r
nrow(team_details)
```

```
## [1] 5
```
]

---

class: left

# Functions

.left-column[ 
### &lt;span style="color:grey"&gt;Overview&lt;/span&gt;
### User-defined
]
.right-column[
__General structure when defining a function:__   

```r
functionname &lt;- function(inputs){
  # calculations...
  output
  }
```
]
???

- You define the inputs and outputs
- All calculations are within squiggly brackets
--
.right-column[
**Subsequent calls to the function:**  
`functionname(inputs)`
]

???

- The function will be an object in your environment

---

class: left

# Functions

.left-column[ 
### &lt;span style="color:grey"&gt;Overview&lt;/span&gt;
### User-defined
]
.right-column[
E.g. Load `data/grades.csv`  

```
##     subject grade grade_point credits
## 1      Math     A         5.0       5
## 2   English     B         3.5       5
## 3 Economics     C         2.0       4
## 4  Mandarin    B+         4.0       5
## 5  Sleeping    A+         5.0       0
## 6  Cantrmbr     F         1.0       5
## 7   Intro2R    A+         5.0       1
```
]

---

class: left

# Functions

.left-column[ 
### &lt;span style="color:grey"&gt;Overview&lt;/span&gt;
### User-defined
]
$$
\frac{ \sum_{i=1}^{n} gradepoint_i \times credits_i}{ \sum_{i=1}^{n} credits_i}
$$
.right-column[
**Calculate the GPA in R using the formula above**  
]
--
.right-column[

```r
sum(grades$grade_point * grades$credits) / sum(grades$credits)
```

```
## [1] 3.22
```
]

???
- What is the answer?
- Vectorised multiplication in R

---

class: left

# Functions

.left-column[ 
### &lt;span style="color:grey"&gt;Overview&lt;/span&gt;
### User-defined
]
.right-column[
Create a function named `scorer` that:
- Takes a dataframe as input
- Outputs a calculation based on the colnames `grade_point` and `credits`

```r
scorer &lt;- function(x=grades){
  sum(x$grade_point*x$credits) / sum(x$credits)
  }
```
]
--
.right-column[

```r
scorer(grades) #use function
```

```
## [1] 3.22
```
]

---

class: left

# Functions

.left-column[ 
### &lt;span style="color:grey"&gt;Overview&lt;/span&gt;
### User-defined
### Loops
]
.right-column[
- Loop functions repeat code `i` number of times
- Perform subsetting to extract/write calculations within loops
  - E.g. `x[i]` refers to the `i`th element in vector `x`
]

???
- We will briefly touch on a few common types of loops
---

class: left

# Functions

.left-column[ 
### &lt;span style="color:grey"&gt;Overview&lt;/span&gt;
### User-defined
### Loops
]
.right-column[
**Find the range of values for _each_ numeric column in `grades`**  
]
???
- Range: 2 values per column &gt; let's make a list!
--
.right-column[

```r
colrange &lt;- list() # create empty list
```
]
--
.right-column[

```r
for(i in 3:ncol(grades)){ # iterate across numeric cols 3-4 (2 times)
  colrange[[i]] &lt;- range(grades[,i])
}
```
]
???
- E.g. of a FOR loop

---

class: left

# Functions

.left-column[ 
### &lt;span style="color:grey"&gt;Overview&lt;/span&gt;
### User-defined
### Loops
]
.right-column[
**Find the range of values for _each_ numeric column in `grades`**  
]
.right-column[

```r
names(colrange) &lt;- names(grades) # convert to named list
colrange
```

```
## $subject
## NULL
## 
## $grade
## NULL
## 
## $grade_point
## [1] 1 5
## 
## $credits
## [1] 0 5
```
]

???
- Other egs of loops in notes

---

class: left

# Functions

.left-column[ 
### &lt;span style="color:grey"&gt;Overview&lt;/span&gt;
### &lt;span style="color:grey"&gt;User-defined&lt;/span&gt;
### Loops
]

.right-column[
**Loop functions in base R**  
`lapply(x, FUN)`: Apply a function on each element of `x`, returns a _list_
]
--
.right-column[
**Find the range of values for _each_ numeric column in `grades`**  
]
???
- Similar to our previous eg!
--
.right-column[

```r
lapply(grades[,3:4], range) #apply range() function
```

```
## $grade_point
## [1] 1 5
## 
## $credits
## [1] 0 5
```
]

---

class: left

# Functions

.left-column[ 
### &lt;span style="color:grey"&gt;Overview&lt;/span&gt;
### &lt;span style="color:grey"&gt;User-defined&lt;/span&gt;
### Loops
]

.right-column[
**Loop functions in base R**  
`apply(x, MARGIN, FUN)`: Apply a function to tabular data by rows (`1`), cols (`2`), or both `c(1,2)`
]
--
.right-column[
**Find the range of values for _each_ numeric column in `grades`**  
]
--
.right-column[

```r
apply(grades, 2, range) # 2 means apply across cols
```

```
##      subject    grade grade_point credits
## [1,] "Cantrmbr" "A"   "1.0"       "0"    
## [2,] "Sleeping" "F"   "5.0"       "5"
```
]
???
- range() of factors are alphabetical (don't mean anything)
---

class: left

# Functions

.left-column[ 
### &lt;span style="color:grey"&gt;Overview&lt;/span&gt;
### &lt;span style="color:grey"&gt;User-defined&lt;/span&gt;
### Loops
]

.right-column[
__Quick test!⚡️__  
  
**Calculate the mean for each numeric variable in `data(economics, package="ggplot2")`**  

```
##         date   pce    pop psavert uempmed unemploy
## 1 1967-07-01 506.7 198712    12.6     4.5     2944
## 2 1967-08-01 509.8 198911    12.6     4.7     2945
## 3 1967-09-01 515.6 199113    11.9     4.6     2958
## 4 1967-10-01 512.2 199311    12.9     4.9     3143
## 5 1967-11-01 517.4 199498    12.8     4.7     3066
## 6 1967-12-01 525.1 199657    11.8     4.8     3018
```
]
???
- 1st few rows
--
.right-column[
**Answer:**  

```r
apply(economics[,-1], 2, mean) # remove date col
```

```
##          pce          pop      psavert      uempmed     unemploy 
## 4.820093e+03 2.571597e+05 8.567247e+00 8.608711e+00 7.771310e+03
```
]

???

Remember to subset away the date variable!

---

class: inverse, center, middle
name: resources

# Questions?  

[About](#about)  
 
[Getting Started](#Getstarted)  

[General Syntax](#gensyntax)  

[Data Structures](#structures)  

[Functions](#functions)    

[Useful Resources](#resources) 

---

class: left

# Useful Resources
__Online tutorials__
- [R for Data Science](https://r4ds.had.co.nz)
- [Quick R](https://www.statmethods.net)
- [R for cats](https://www.rforcats.net) (blog post)
- [swirl](https://swirlstats.com) (good for practice)  

__Online courses__  
- [Introuction to R](https://www.datacamp.com/courses/free-introduction-to-r) by Datacamp
- [R Programming](https://www.coursera.org/learn/r-programming) by Coursera

__Online Q&amp;A__  
- [Stack Overflow](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example?rq=1)
- Remember to check your `sessionInfo()` when troubleshooting!  

__Others__  
- [How to use R/RStudio from an external drive](https://github.com/ClaudiaBrauer/A-very-short-introduction-to-R/blob/master/documents/Portable_versions_of_R_and_RStudio.pdf)  
(i.e. if you don't have admin rights to install software)
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"navigation": {
"scroll": false
}
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
